<h2>
	<div class="icon layer"></div>
	Project layers
</h2>

<div class="mainList">
	<div class="buttons">
		<button class="create"> <span class="icon add"></span> </button>
	</div>
	<div class="search"></div>
	<ul class="niceList compact"></ul>
</div>

<div class="help none">
	Each LEVEL in your project has LAYERS, as defined below. The layers content can be of various types, including Image Tiles or Integer values.
</div>


<div class="rightColumn">
	<div class="collapser" default="open" id="layerPanel_mainForm">General layer settings</div>
	<dl class="form main">
		<dt>
			<label for="type">Type</label>
		</dt>
		<dd>
			<span class="typeIcon"></span>
			<span class="type"></span>
			<button class="help Tiles" href="::tilesUrl::" >Tile layer tutorial</button>
			<button class="help IntGridAutoLayer AutoLayer" href="::autoLayersUrl::" >Auto-layer tutorial</button>
		</dd>


		<dt>
			<label for="lName">Layer identifier</label>
			<info class="identifier"></info>
		</dt>
		<dd>
			<input type="text" name="name" id="lName"/>
		</dd>


		<dt>
			<label for="layerDoc">Documentation</label>
			<info class="userDoc"></info>
		</dt>
		<dd>
			<input type="text" name="layerDoc" id="layerDoc"/>
		</dd>

		<dt class="Tiles">
			<label>Default tileset</label>
			<info>Default tileset used by this layer. It can be changed in each level from the left tool panel.</info>
		</dt>
		<dd class="Tiles">
			<select name="tilesets"></select>
			<span class="infos"></span>
			<button class="create">Create new tileset</button>
		</dd>


		<dt>
			<label for="gridSize">Grid size</label>
			<info>Snap grid dimensions in pixels.</info>
		</dt>
		<dd>
			<input type="text" name="gridSize" class="small" id="gridSize"/>
			<span>px</span>
		</dd>


		<dt>
			<label for="offsetX">Offsets</label>
			<info>
				The offset is used to adjust the horizontal and vertical position of this layer relatively to the level and the other layers.
				Each offset can be negative or positive.
			</info>
		</dt>
		<dd>
			<span>X=</span>
			<input type="text" name="offsetX" class="small" id="offsetX"/>
			<span>px, Y=</span>
			<input type="text" name="offsetY" class="small" id="offsetY"/>
			<span>px</span>
		</dd>


		<dt>
			<label for="opacity">Opacity</label>
			<info>
				Opacity of this layer in percentage, from 0 (transparent) to 100 (fully visible).
				The "inactive" opacity is used when the layer is not being selected.
			</info>
		</dt>
		<dd>
			<span>Base:</span>
			<input type="text" name="displayOpacity" class="small" id="opacity"/>
			<span>%</span>

			<span>Inactive:</span>
			<input type="text" name="inactiveOpacity" class="small" id="opacity"/>
			<span>%</span>
		</dd>

		<dt>
			<label for="parallaxFactor">Parallax</label>
			<info>
				These parallax factors are applied to the layer (coordinates and scale) to make it move "slower" or "faster" than the camera, creating a fake 3D depth effect.
				- Greater than zero factor will make the layer movement slower than the camera (eg. mountains in a far background).
				- Zero means the layer moves at the same rate as the camera.
				- Less than zero means the layer moves faster than the camera (eg. fog in the foreground)
			</info>
		</dt>
		<dd>
			<span>X=</span>
			<input type="text" name="parallaxFactorX" class="small"/>
			<span>%, Y=</span>
			<input type="text" name="parallaxFactorY" class="small"/>
			<span>%</span>

			<label for="parallaxScaling">
				<input type="checkbox" id="parallaxScaling" title="If checked, the layer will also be scaled up/down accodingly with the parallax factor."/>
				Scale ?
			</label>
		</dd>
	</dl>



	<div class="collapser" default="open" id="layerPanel_uiForm">Display options</div>
	<dl class="form visuals">
		<dt>
			<label for="uiColor">Color in layers list</label>
			<info>This color will be used in all lists where the layer appears.</info>
		</dt>
		<dd>
			<input type="color" name="uiColor" id="uiColor"/>
			<button class="transparent resetUiColor small"> <span class="icon reset"></span> </button>
		</dd>


		<dt>
			<label>Visual options</label>
		</dt>
		<dd class="checkboxes">
			<label for="hideInList" title="If enabled, the layer will not be shown in layers list in the editor view.\nNote: the layer will still be rendered normally in levels and listed in the Layers panel.">
				<input type="checkbox" name="hideInList" class="small" id="hideInList"/>
				Hide in list
			</label>

			<label class="Tiles AutoLayer IntGrid" for="renderInWorldView" title="If enabled, the content of this layer will be used when rendering levels in a simplified way for the world view.">
				<input type="checkbox" name="renderInWorldView" class="small" id="renderInWorldView"/>
				Show in world view
			</label>

			<label class="Entities Tiles IntGrid" for="canSelectWhenInactive" title="If enabled, it will be possible to pick an element (ie. ALT+left click) or create a selection including this layer, even if it is not the active one.\nIf disabled, you will need to be working in this layer to select anything from it.">
				<input type="checkbox" name="canSelectWhenInactive" class="small" id="canSelectWhenInactive"/>
				Allow selections when inactive
			</label>

			<label class="Tiles AutoLayer IntGrid" for="useAsyncRender" title="Actual render of tiles only happens a few milliseconds after painting.\nUse this if your layer is very complex or large, and painting anything in it is getting too slow.">
				<input type="checkbox" name="useAsyncRender" class="small" id="useAsyncRender"/>
				Asynchronous render
			</label>
		</dd>

		<dt>
			<label for="guideGridWid">Optional "guide" grid</label>
			<info>Dimensions of the optional secondary grid. This grid is only a visual guide and is not used for actual snapping like the normal one.</info>
		</dt>
		<dd>
			<input type="text" name="guideGridWid" class="small" id="guideGridWid" placeholder="(width)"/>
			<span>x</span>
			<input type="text" name="guideGridHei" class="small" id="guideGridHei" placeholder="(height)"/>
			<span>px</span>
		</dd>

		<dt>
			<label for="uiFilterTags">UI tags</label>
			<div class="info">These tags are used to filter elements from your layer list in the main editor panel.</div>
		</dt>
		<dd>
			<div id="uiFilterTags"></div>
		</dd>

	</dl>



	<div class="collapser" default="open" id="layerPanel_specificForm"><span class="inlined" id="typeSpecificTitle"></span> settings</div>
	<dl class="form typeSpecific">
		<dt class="Entities">
			<label for="hideFieldsWhenInactive">Hide entity fields when inactive</label>
			<info>
				If enabled, entity fields will not be shown if the layer is not currently selected.
			</info>
		</dt>
		<dd class="Entities">
			<input type="checkbox" name="hideFieldsWhenInactive" class="small" id="hideFieldsWhenInactive"/>
		</dd>



		<dt class="IntGrid">
			<label>Values interface icons</label>
			<info>You may associate custom interface icons to each value. These icons are only used for the UI, not for actual rendering. To render values as tiles in your level, use Auto-Layer below.</info>
		</dt>
		<dd class="IntGrid">
			<select class="valuesIconsTileset"></select>
		</dd>


		<dt class="IntGrid">
			<label>Grid values</label>
			<info>The list of all Integer values that could be painted in this IntGrid layer.</info>
		</dt>
		<dd class="IntGrid intGridValues">
			<div class="buttons">
				<button class="gray addValue" title="Create an IntGrid value"> <span class="icon add"></span> </button>
				<button class="gray addGroup" title="Create a group of IntGrid values"> <span class="icon folder"></span> </button>
			</div>
			<ul class="intGridValuesGroups"></ul>

			<xml id="intGridValuesGroup">
				<div class="header">
					<span class="icon folderClose groupIcon"></span>
					<span class="name"></span>
				</div>
				<ul class="intGridValuesGroup"></ul>
				<button class="addGroupValue"> <span class="icon add"></span> </button>
			</xml>

			<xml id="intGridValue">
				<div class="sortHandle"></div>
				<span class="id">?</span>
				<input type="color" value="#ffffff"/>
				<span class="tile"></span>
				<input type="text" class="name" placeholder="Optional value identifier"/>
				<button class="red remove"><span class="icon delete"></span></button>
			</xml>
		</dd>

		<dt class="Tiles">
			<label>Tile pivot point</label>
			<info>
				This is only useful if the Tileset grid size is different from the layer grid size.
				In this case, the pivot will dictate the position of the tiles relatively to the layer grid.
			</info>
		</dt>
		<dd class="Tiles">
			<div class="pivot"></div>
			<span class="long"></span>
		</dd>


		<dt class="AutoLayer">
			<label>Auto-Layer source</label>
		</dt>
		<dd class="AutoLayer">
			<select name="autoLayerSources"></select>
			<div class="help">This auto-layer will use the INTGRID layer above to apply its rules.</div>
		</dd>


		<dt class="IntGrid AutoLayer">
			<label>Auto-layer tileset</label>
			<info>
				Selecting a Tileset here will enable all Auto-Layer rendering capabilities for this layer.
				This allows to render automatically tiles based on the IntGrid values (eg. painting random "grass" tiles above cells containing "collision" values).
			</info>
		</dt>
		<dd class="IntGrid AutoLayer">
			<select name="autoTileset"></select>
			<button class="editAutoRules">Edit rules</button>
		</dd>


		<dt class="AutoLayer IntGridAutoLayer">
			<label>Kill tiles</label>
			<info>If the selected Tile layer contains any tiles, this auto-layer won't draw anything under them.</info>
		</dt>
		<dd class="AutoLayer IntGridAutoLayer">
			<select name="autoKillLayer"></select>
		</dd>


		<dt class="IntGrid AutoLayer">
			<label>Biome enum</label>
			<info>
				You can use an Enum field from your level custom fields as a "biome selector".
				Auto-layer rule groups may then be individually enabled when a certain biome is picked.
			</info>
		</dt>
		<dd class="IntGrid AutoLayer">
			<select name="biomeField"></select>
		</dd>


		<dt class="Entities">
			<label>Required tags</label>
			<info>
				Only entities that have at least ONE of the required tags will be allowed in this layer.
				Note: this won't affect previously added entities.
			</info>
		</dt>
		<dd class="Entities">
			<div id="requiredTags"></div>
		</dd>

		<dt class="Entities">
			<label>Excluded tags</label>
			<info>
				Entities that have at least ONE of the forbidden tags will not be allowed in this layer.
				Note: this won't affect previously added entities.
			</info>
		</dt>
		<dd class="Entities">
			<div id="excludedTags"></div>
		</dd>

		<dt class="advanced Entities IntGridAutoLayer AutoLayer">
			<label>Advanced operations</label>
		</dt>
		<dd class="advanced Entities">
			<button class="moveEntities" title="Use this action to quickly move a selection of entity instances from this layer to another one.\nThis is typically useful if, for example, you added an 'Actor' tag to some entities, and you wanted to move all existing Actors to a new 'ActorsOnly' layer.">
				Move existing entities to another layer
			</button>
		</dd>
		<dd class="advanced IntGridAutoLayer AutoLayer">
			<button class="bake" title="Baking will flatten this auto-layer into a single new Tiles layer. Various options are available.">
				<span class="icon flatten"></span>
				Bake auto-layer
			</button>
		</dd>
	</dl>
</div>
